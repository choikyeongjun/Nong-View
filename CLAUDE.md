# Nong-View AI 영상분석 파이프라인 개발 계획

## 프로젝트 개요
- **목적**: 드론 정사영상 기반 농업 모니터링 및 행정 자동화 시스템
- **핵심기능**: 조사료/시설물/농지이용 상태 AI 자동 분석
- **최종산출물**: 행정보고용 GPKG 및 통계 리포트

## 개발 역할 분담

### 🤖 Claude Opus 담당 영역
> 복잡한 아키텍처 설계, AI/ML 파이프라인, 고성능 처리 시스템

#### POD 1: 파일 가져오기 (데이터 관리)
- [ ] 데이터 레지스트리 아키텍처 설계
- [ ] 메타데이터 스키마 정의 (영상/공간레이어)
- [ ] 버전 관리 시스템 설계 (시계열 스냅샷)
- [ ] 좌표계 통일 및 정합성 검증 엔진

#### POD 3: 타일링
- [ ] 640x640 타일 생성 엔진 설계
- [ ] 겹침(Overlap) 전략 알고리즘 구현
- [ ] 타일 인덱싱 시스템 설계
- [ ] 대량 타일링용 큐/워커 아키텍처 (Celery)

#### POD 4: AI 분석
- [ ] YOLOv11 추론 엔진 아키텍처
- [ ] 멀티모델 관리 시스템 (3개 모델군)
  - 조사료/사료작물 분류 모델
  - 비닐하우스 탐지 모델  
  - 경작/휴경 판별 모델
- [ ] 모델 버전 관리 시스템
- [ ] MLOps 파이프라인 설계
- [ ] 추론 성능 최적화 (GPU 활용)

#### POD 5: 병합
- [ ] 타일 결과 병합 알고리즘 설계
- [ ] 겹치는 객체 머지 로직
- [ ] 공간 쿼리 최적화 (PostGIS)
- [ ] 시계열 비교 분석 엔진

#### 인프라 & 성능
- [ ] 대용량 이미지 I/O 병렬 처리 시스템
- [ ] GPU 추론 서버 구성
- [ ] 분산 처리 아키텍처
- [ ] 파이프라인 오케스트레이션

### 🎯 Claude Sonnet 담당 영역  
> API 개발, 데이터 처리, UI/UX, 통합 및 배포

#### POD 1: 파일 가져오기 (데이터 관리)
- [ ] 원천데이터 인입 REST API 구현
- [ ] TIF/ECW 파일 업로드 핸들러
- [ ] SHP 파일 파싱 및 저장 모듈
- [ ] PNU 기반 필지 데이터 로더

#### POD 2: 크로핑 (ROI 추출)
- [ ] 영역 추출 API 엔드포인트
- [ ] Convex Hull 계산 유틸리티
- [ ] GDAL/Rasterio 기반 클리핑 구현
- [ ] Crop 결과 저장 및 관리 API

#### POD 4: AI 분석
- [ ] 추론 요청/응답 REST API
- [ ] 결과 JSON 스키마 구현
- [ ] 클래스 라벨 매핑 테이블
- [ ] 추론 결과 DB 적재 로직

#### POD 5: 병합
- [ ] 필지별 통계 산출 함수
- [ ] 면적/개수/길이 계산 모듈
- [ ] 행정 DB 조인 서비스
- [ ] 대시보드용 데이터 API

#### POD 6: GPKG 발행
- [ ] GPKG Export 모듈 구현
- [ ] 다운로드/배포 REST API
- [ ] 민감정보 마스킹 처리
- [ ] 자동 리포트 템플릿 생성

#### UI/UX & 통합
- [ ] 관리자 대시보드 개발
- [ ] 처리 상태 모니터링 UI
- [ ] 분석 요청 인터페이스
- [ ] 결과 시각화 컴포넌트

## 개발 우선순위 (Sprint 1)

### Week 1-2: 기반 구축
1. **Opus**: 전체 시스템 아키텍처 설계, 데이터 스키마 정의
2. **Sonnet**: 프로젝트 구조 셋업, 기본 API 프레임워크 구축

### Week 3-4: 데이터 파이프라인
1. **Opus**: 타일링 엔진, 좌표계 정합 시스템
2. **Sonnet**: 파일 업로드 API, 크로핑 모듈 구현

### Week 5-6: AI 추론 시스템
1. **Opus**: YOLOv11 추론 엔진, 모델 관리 시스템
2. **Sonnet**: 추론 API, 결과 저장 로직

### Week 7-8: 병합 및 출력
1. **Opus**: 타일 병합 알고리즘, 성능 최적화
2. **Sonnet**: GPKG Export, 리포트 생성, 대시보드

## 공통 작업 영역

### 둘 다 협업
- [ ] 메타데이터 및 ID 체계 표준화
- [ ] API 스펙 문서화
- [ ] 테스트 케이스 작성
- [ ] 보안 및 접근 제어 정책
- [ ] 배포 파이프라인 구축

## 커뮤니케이션 규칙

1. **일일 동기화**: 매일 진행상황 공유
2. **API 계약**: 인터페이스 변경 시 사전 협의
3. **코드 리뷰**: 주요 모듈 상호 리뷰
4. **문서화**: 각자 담당 영역 문서 실시간 업데이트

## 성공 지표

- [ ] POD 1-6 전체 파이프라인 자동화
- [ ] 640x640 타일 처리 속도 < 100ms/tile
- [ ] AI 추론 정확도 > 90%
- [ ] 필지별 병합 처리 시간 < 5초
- [ ] GPKG 발행 자동화 100%

## 리스크 관리

| 리스크 | 담당 | 대응방안 |
|--------|------|----------|
| 대용량 이미지 처리 병목 | Opus | 분산 처리 아키텍처 |
| 좌표계 불일치 | Opus | 정합성 검증 강화 |
| API 응답 지연 | Sonnet | 캐싱 전략 수립 |
| UI 복잡도 | Sonnet | 단계적 기능 출시 |

---

*Last Updated: 2025-10-26*
*Next Review: 2025-11-02*